<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Sun Bangjie - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Sun Bangjie - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-part-time-manager-ptman"><a class="link" href="#project-part-time-manager-ptman">PROJECT: Part-time Manager (PTMan)</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part-Time Manager (PTMan) is a desktop human resource application used for managing part-time employees.<br></p>
</div>
<div class="paragraph">
<p>PTMan aims to give part-time employees the freedom of choosing when they want to work by registering for the available shifts set by the employer.
Thereby reducing the hassle of work scheduling for both employers and employees.<br></p>
</div>
<div class="paragraph">
<p>The user interacts with the application using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 10 kLoC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: Added the <strong>outlet</strong> feature.</p>
<div class="ulist">
<ul>
<li>
<p>What it does:</p>
<div class="ulist">
<ul>
<li>
<p>It allows outlet managers to edit outlet information including name, operating hours, contact number and email.</p>
</li>
<li>
<p>It allows managers to create and broadcast announcement to all employees.</p>
</li>
<li>
<p>It allows managers to encrypt and decrypt data stored in local storage files.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Justification: This feature improves the product significantly because:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Outlet information is unique and essential. Operating hours will determine the timetable and working schedule. Contact number and email will be used to receive admin password reset. This outlet feature provides convenient ways for managers to manage the outlet.</p>
</li>
<li>
<p>Creating and broadcasting announcement is necessary as it enhances communication between managers and employees.</p>
</li>
<li>
<p>Encryption and decryption of local storage files prevents any group of people who do not have the access from interpreting the private and important data, and protects the credential of data.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Highlights: This enhancement modifies the existing model to store outlet information. It also modifies the UI component to display outlet information. There were design considerations to integrate outlet information into the existing model while minimizing coupling with the other components.
This enhancement also changes the storage component significantly as data stored can be encrypted and decrypted.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added functionality that backs up local storage files to <code>.backup</code> files.</p>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103JAN2018-W14-B2/main/blob/master/collated/functional/SunBangjie.md">Functional code</a>]
[<a href="https://github.com/CS2103JAN2018-W14-B2/main/blob/master/collated/test/SunBangjie.md">Test code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed release <code>v1.3</code> (1 release) on GitHub.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Updated user stories, use cases and NFRs in Developer guide: <a href="https://github.com/CS2103JAN2018-W14-B2/main/pull/2">#2</a>, <a href="https://github.com/CS2103JAN2018-W14-B2/main/pull/10">#10</a></p>
</li>
<li>
<p>Updated formatting of Developer Guide: <a href="https://github.com/CS2103JAN2018-W14-B2/main/pull/23">#23</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples:  <a href="https://github.com/CS2103JAN2018-W13-B2/main/issues/142">#142</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="outlet-management"><a class="link" href="#outlet-management">Outlet Management</a></h3>
<div class="paragraph">
<p>If you are a manager, PTMan allows you to manage your outlet. You can edit your outlet name, operating hours, contact number and email.
The timetable automatically re-sizes according to the operating hours. You can also create any announcement and broadcast to your employees.</p>
</div>
<div class="paragraph">
<p>If you are an employee, you can view announcement created by your manager and take actions accordingly.</p>
</div>
<div class="paragraph">
<p><em><a href="#fig-Feature_Outlet">Figure 1</a></em> shows where you can view your outlet information.</p>
</div>
<div id="fig-Feature_Outlet" class="imageblock">
<div class="content">
<img src="../images/IntroductionToOutlet.jpg" alt="IntroductionToOutlet" width="790">
</div>
<div class="title">Figure 1. Sample Outlet Information Displayed<br></div>
</div>
<div class="sect3">
<h4 id="Editoutlet"><a class="link" href="#Editoutlet">Editing the outlet information: <code>editoutlet</code></a></h4>
<div class="paragraph">
<p>Edits the outlet information.<br></p>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>editoutlet n/OUTLET_NAME h/OPERATING_HOURS c/CONTACT_NUMBER e/EMAIL</code> <br>
<strong>Shorthand:</strong> <code>eo</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>At least one of the optional fields must be provided.</p>
</li>
<li>
<p>Existing values will be updated to the input values.</p>
</li>
<li>
<p><code>OPERATING_HOURS</code> are in HHMM-HHMM format.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Ensure that the outlet email is valid as it will be used to reset the admin password should you forget it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When you first start using PTMan, your outlet information will be default values as shown in <em><a href="#fig-DefaultOutlet">Figure 2</a></em>.</p>
<div id="fig-DefaultOutlet" class="imageblock">
<div class="content">
<img src="../images/DefaultOutlet.jpg" alt="DefaultOutlet" width="790">
</div>
<div class="title">Figure 2. Default Outlet Information<br></div>
</div>
</li>
<li>
<p>In the admin mode, you can edit the name, operating hours, contact number, and email of the outlet to be <code>AwesomeCoffee</code>, <code>10am to 11pm</code>, <code>98134086</code>, and <code>awesomecoffee@gmail.com</code> respectively, by typing:<br>
<code>editoutlet n/AwesomeCoffee h/1000-2300 c/98134086 e/awesomecoffee@gmail.com</code>.<br>
You can refer to <em><a href="#fig-Edit1">Figure 3</a></em>.</p>
<div id="fig-Edit1" class="imageblock">
<div class="content">
<img src="../images/Ui_editoutlet1.png" alt="Ui editoutlet1" width="790">
</div>
<div class="title">Figure 3. Example of <code>editoutlet</code> command usage<br></div>
</div>
</li>
<li>
<p>Press <kbd>Enter</kbd> and you would see a confirmation message below the command bar, and the changes applied to the outlet information.
<em><a href="#fig-Edit2">Figure 4</a></em> shows how PTMan should look like after the above command.</p>
<div id="fig-Edit2" class="imageblock">
<div class="content">
<img src="../images/Ui_editoutlet2.png" alt="Ui editoutlet2" width="600">
</div>
<div class="title">Figure 4. Successful editing of outlet information in PTMan<br></div>
</div>
</li>
<li>
<p>To only edit the name and contact number to be <code>Nice Dim Sum</code> and <code>901234567</code> respectively, you can type: <code>editoutlet n/Nice Dim Sum c/901234567</code>.
You will see changes as shown in <em><a href="#fig-Edit3">Figure 5</a></em>.</p>
<div id="fig-Edit3" class="imageblock">
<div class="content">
<img src="../images/Ui_editoutlet3.png" alt="Ui editoutlet3" width="600">
</div>
<div class="title">Figure 5. Successful editing of outlet information in PTMan<br></div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Announcement"><a class="link" href="#Announcement">Creating an announcement: <code>announcement</code></a></h4>
<div class="paragraph">
<p>Sets an announcement for the outlet.<br></p>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>announcement ANNOUNCEMENT_MESSAGE</code><br>
<strong>Shorthand:</strong> <code>announce</code></p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can leave a note for your employees by making an announcement in PTMan. You can type the following command as illustrated in <em><a href="#fig-Announce1">Figure 6</a></em>.</p>
<div id="fig-Announce1" class="imageblock">
<div class="content">
<img src="../images/Ui_announcement1.png" alt="Ui announcement1" width="790">
</div>
<div class="title">Figure 6. Example of <code>announce</code> command usage<br></div>
</div>
</li>
<li>
<p>Click <kbd>Enter</kbd> and you would see a confirmation message below the command bar, and the changes applied to the announcement.
<em><a href="#fig-Announce2">Figure 7</a></em> shows how PTMan should look like after the above command.</p>
<div id="fig-Announce2" class="imageblock">
<div class="content">
<img src="../images/Ui_announcement2.png" alt="Ui announcement2" width="600">
</div>
<div class="title">Figure 7. Successful announcement made in PTMan<br></div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Encrypt"><a class="link" href="#Encrypt">Encrypting the local storage files: <code>encrypt</code></a></h4>
<div class="paragraph">
<p>Encrypts data stored in the files in <code>data</code> folder.</p>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>encrypt</code></p>
</div>
<div class="paragraph">
<p>After your <code>encrypt</code> command is executed successfully, you would see a confirmation message below the command bar as shown in <em><a href="#fig-SuccessfulEncryptCommand">Figure 8</a></em>.</p>
</div>
<div id="fig-SuccessfulEncryptCommand" class="imageblock">
<div class="content">
<img src="../images/SuccessfulEncryptCommand.jpg" alt="SuccessfulEncryptCommand" width="500">
</div>
<div class="title">Figure 8. Successful <code>encrypt</code> command made in PTMan<br></div>
</div>
<div class="paragraph">
<p>In addition, you can view your data stored in local files by the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the folder where your app <code>PTMan.jar</code> is at.</p>
</li>
<li>
<p>Open the folder named <code>data</code>. You will see two files <code>outletinformation.xml</code> and <code>parttimemanager.xml</code> there.</p>
</li>
<li>
<p>Open <code>outletinformation.xml</code> with Internet Explorer (IE). The third line of the file indicates the encryption status with reference to <em><a href="#fig-Encrypt">Figure 9</a></em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em><a href="#fig-Encrypt">Figure 9</a></em> shows an example of what the <code>outletinformation.xml</code> file should look like when the <code>encrypt</code> command is successfully executed.</p>
</div>
<div id="fig-Encrypt" class="imageblock">
<div class="content">
<img src="../images/OutletInformationEncryptedXMLFile.jpg" alt="OutletInformationEncryptedXMLFile" width="790">
</div>
<div class="title">Figure 9. Example of encrypted <code>outletinformation.xml</code> file in <code>data</code> folder<br></div>
</div>
</div>
<div class="sect3">
<h4 id="Decrypt"><a class="link" href="#Decrypt">Decrypting the local storage files: <code>decrypt</code></a></h4>
<div class="paragraph">
<p>Decrypts data stored in the files in <code>data</code> folder.</p>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>decrypt</code></p>
</div>
<div class="paragraph">
<p>After your <code>decrypt</code> command is executed successfully, you would see a confirmation message below the command bar as shown in <em><a href="#fig-SuccessfulDecryptCommand">Figure 10</a></em>.</p>
</div>
<div id="fig-SuccessfulDecryptCommand" class="imageblock">
<div class="content">
<img src="../images/SuccessfulDecryptCommand.jpg" alt="SuccessfulDecryptCommand" width="500">
</div>
<div class="title">Figure 10. Successful <code>decrypt</code> command made in PTMan<br></div>
</div>
<div class="paragraph">
<p>Open <code>outletinformation.xm;</code> file again, now you can read and understand the data stored as shown in <em><a href="#fig-Decrypt">Figure 11</a></em>.</p>
</div>
<div id="fig-Decrypt" class="imageblock">
<div class="content">
<img src="../images/OutletInformationDecryptedXMLFile.jpg" alt="OutletInformationDecryptedXMLFile" width="790">
</div>
<div class="title">Figure 11. Example of decrypted <code>outletinformation.xml</code> file in <code>data</code> folder<br></div>
</div>
</div>
<div class="sect3">
<h4 id="viewing-encryption-status-code-viewencrytion-code"><a class="link" href="#viewing-encryption-status-code-viewencrytion-code">Viewing encryption status: <code>viewencrytion</code></a></h4>
<div class="paragraph">
<p>Shows encryption status of local storage files.</p>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>viewencryption</code><br>
<strong>Shorthand:</strong> <code>ve</code></p>
</div>
<div class="paragraph">
<p>After your <code>viewencryption</code> command is executed successfully, you would see an encryption status message below the command bar as shown in <em><a href="#fig-SuccessfulVECommand">Figure 12</a></em>.</p>
</div>
<div id="fig-SuccessfulVECommand" class="imageblock">
<div class="content">
<img src="../images/SuccessfulVECommand.jpg" alt="SuccessfulVECommand" width="400">
</div>
<div class="title">Figure 12. Example of <code>viewencryption</code> command made in PTMan<br></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="backing-up-the-data"><a class="link" href="#backing-up-the-data">Backing Up the Data</a></h3>
<div class="paragraph">
<p>Backup files are automatically created and saved in the hard disk upon exit of the app. There is no need to do backup manually.<br>
You can replace any local storage files with backup files by the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy any backup files named <code>outletinformation.xml.backup</code> or <code>parttimemanager.xml.backup</code>.</p>
</li>
<li>
<p>Open the folder where your app <code>PTMan.jar</code> is at.</p>
</li>
<li>
<p>Open the folder named <code>data</code>.</p>
</li>
<li>
<p>Paste your copied backup files there.</p>
</li>
<li>
<p>Rename <code>outletinformation.xml.backup</code> to <code>outletinformation.xml</code>.</p>
</li>
<li>
<p>Rename <code>parttimemanager.xml.backup</code> to <code>parttimemanager.xml</code>.</p>
</li>
<li>
<p>Run the app <code>PTMan.jar</code> and you will see all the restored data read from backup files.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="outlet-feature"><a class="link" href="#outlet-feature">Outlet Feature</a></h3>
<div class="sect3">
<h4 id="reason-for-implementation"><a class="link" href="#reason-for-implementation">Reason for implementation</a></h4>
<div class="paragraph">
<p>PTMan is designed for outlets such as bubble tea shops and fast food restaurants which require a large number of part-time workers.
This outlet feature stores basic outlet information such as outlet name, operating hours, contact number, email and admin password managed by the employers.
Such details are essential to facilitate other functions such as the access control system and the timetable displayed in the app.</p>
</div>
</div>
<div class="sect3">
<h4 id="how-it-is-implemented-and-alternative-implementation-considered"><a class="link" href="#how-it-is-implemented-and-alternative-implementation-considered">How it is implemented and alternative implementation considered</a></h4>
<div class="sect4">
<h5 id="outletinformation-class"><a class="link" href="#outletinformation-class">OutletInformation class</a></h5>
<div class="paragraph">
<p>The <code>OutletInformation</code> class represents an outlet in PTMan.
It supports relevant commands that utilize attributes of this class. It is also responsible for information displayed in the UI and data stored in local storage files.<br></p>
</div>
<div class="paragraph">
<p><em><a href="#fig-OutletClassDiagram">Figure 13</a></em> is a class diagram that displays the association between <code>OutletInformation</code> and other classes in the <code>Model</code>.</p>
</div>
<div id="fig-OutletClassDiagram" class="imageblock">
<div class="content">
<img src="../images/OutletInformationClassDiagram.png" alt="OutletInformationClassDiagram" width="800">
</div>
<div class="title">Figure 13. Overview of the OutletInformation Class in the Model Component</div>
</div>
<div class="paragraph">
<p>Currently, the <code>OutletInformation</code> object initialized in the <code>PartTimeManager</code> is created by calling its default constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OutletInformation()</pre>
</div>
</div>
<div class="paragraph">
<p>This default constructor initializes a boolean value <code>isDataEncrypted</code> to false and six other fields, including <code>masterPassword</code>, <code>outletName</code>, <code>operatingHours</code>, <code>outletEmail</code>, <code>outletContact</code>, <code>announcement</code> as shown in <em>Figure 11</em>, to respective default values.</p>
</div>
<div class="paragraph">
<p>The reason why it is implemented in this way is that with the help of initial values, any employer new to PTMan does not need to create a new <code>OutletInformation</code> object.
It saves time as the <code>OutletInformation</code> object has already been created with default values.
Employers can edit those values by entering an <code>editoutlet</code> command after they log in.</p>
</div>
<div class="paragraph">
<p>In addition, there is an alternative way to create an <code>OutletInformation</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OutletInformation(OutletName outletName, OperatingHours operatingHours, OutletContact outletContact, OutletEmail outletEmail, Announcement announcement, Password masterPassword, boolean isDataEncrypted)</pre>
</div>
</div>
<div class="paragraph">
<p>This constructor allows flexibility in storing outlet information where all seven attributes can be initialized with specific values.
However, you must be careful when you want to call this constructor.
Since <code>isDataEncrypted</code> can be initialized to true, you may want to inform the users new to this app that data stored in local files are encrypted.
Similarly, you need to update the default admin password in the User Guide to whatever you used to initialize the <code>masterPassword</code>.
Otherwise, users are unable to log in with correct password when they start using the app for the first time.</p>
</div>
</div>
<div class="sect4">
<h5 id="commands"><a class="link" href="#commands">Commands</a></h5>
<div class="paragraph">
<p>Currently, there are two commands that allow employers to change attributes of the <code>OutletInformation</code>: <code>editoutlet</code> and <code>announcement</code> commands which are implemented in similar ways.
The implementation of <code>editoutlet</code> command will be explained in details.
In addition, there are also commands that allow employers to encrypt and decrypt local storage files.
The implementation of <code>encrypt</code> command and how data is encrypted will be explained in details.<br></p>
</div>
<div class="sect5">
<h6 id="edit-outlet-command"><a class="link" href="#edit-outlet-command">Edit outlet command</a></h6>
<div class="paragraph">
<p>The <code>editoutlet</code> command can change outlet name, operating hours, contact number and email, which are displayed in the app as shown in <em><a href="#fig-OutletInformationDisplayed">Figure 14</a></em>.
The information displayed will change after a successful command.</p>
</div>
<div id="fig-OutletInformationDisplayed" class="imageblock">
<div class="content">
<img src="../images/outletinformationdisplay.jpg" alt="outletinformationdisplay" width="600">
</div>
<div class="title">Figure 14. Example of the Outlet Information Displayed</div>
</div>
<div class="paragraph">
<p>Currently, editing with some fields unspecified is allowed.
For example, <code>editoutlet n/OUTLETNAME</code> is a valid command.
The reason why it is implemented in this why is that it enables employers to edit only the information required for change.</p>
</div>
<div class="paragraph">
<p>In order to check whether some fields are specified, several branches are created in the <code>setOutletInformation</code> method of the <code>OutletInformation</code> class.
When all fields are null, it throws a new exception as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (name == <span class="predefined-constant">null</span> &amp;&amp; operatingHours == <span class="predefined-constant">null</span> &amp;&amp; outletContact == <span class="predefined-constant">null</span> &amp;&amp; outletEmail == <span class="predefined-constant">null</span>) {
    <span class="keyword">throw</span> <span class="keyword">new</span> NoOutletInformationFieldChangeException();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>NoOutletInformationFieldChangeException</code> is then handled by the <code>EditOutletCommand</code>.
When the exception is caught, the <code>CommandException</code> with a message of command failure will be thrown,
with reference to the function below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">try</span> {
    editedOutlet.setOutletInformation(name, operatingHours, outletContact, outletEmail);
} <span class="keyword">catch</span> (NoOutletInformationFieldChangeException e) {
    <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(MESSAGE_EDIT_OUTLET_FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram (<em><a href="#fig-EditOutletCommandSequenceDiagram">Figure 15</a></em>) illustrates how an <code>editoutlet</code> command is executed in the Logic Component, and how it interacts with the Model Component.</p>
</div>
<div id="fig-EditOutletCommandSequenceDiagram" class="imageblock">
<div class="content">
<img src="../images/EditOutletCommandSequenceDiagram.png" alt="EditOutletCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 15. Interactions inside the Logic Component for the <code>editoutlet n/Edited Outlet</code> Admin Command</div>
</div>
<div class="paragraph">
<p>When an <code>editoutlet</code> executes successfully, three events will be raised and handled as shown in <em><a href="#fig-EditOutletCommandHighLevelSequenceDiagram">Figure 16</a></em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>OutletNameChangedEvent</code> updates the outlet name displayed in the app.</p>
</li>
<li>
<p><code>OutletInformationChangedEvent</code> updates the operating hours, contact number and email displayed in the app.</p>
</li>
<li>
<p><code>OutletDataChangedEvent</code> saves latest outlet information to local storage file "data/outletinformation.xml".</p>
</li>
</ol>
</div>
<div id="fig-EditOutletCommandHighLevelSequenceDiagram" class="imageblock">
<div class="content">
<img src="../images/EditOutletCommandHighLevelSequenceDiagrams.png" alt="EditOutletCommandHighLevelSequenceDiagrams" width="800">
</div>
<div class="title">Figure 16. High Level Sequence Diagram for the <code>editoutlet</code> Command</div>
</div>
</div>
<div class="sect5">
<h6 id="encrypt-and-decrypt-commands"><a class="link" href="#encrypt-and-decrypt-commands">Encrypt and decrypt commands</a></h6>
<div class="paragraph">
<p>Since PTMan stores files locally, it is highly possible that any worker in the outlet can open the storage files and read data inside.
Such files store a large amount of essential and private data such as admin password, employees' passwords, employees' phones, addresses, and emails.
By using the <code>encrypt</code> command, the data in local storage files can be hidden from any group of people who do not have the access to it.
Employers can use the <code>decrypt</code> command to make the files human-readable.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram (<em><a href="#fig-EncryptCommandSequenceDiagram">Figure 17</a></em>) illustrates how an <code>encrypt</code> command is executed in the Logic Component, and how it interacts with the Model Component.</p>
</div>
<div id="fig-EncryptCommandSequenceDiagram" class="imageblock">
<div class="content">
<img src="../images/EncryptDataCommandSequenceDiagram.png" alt="EncryptDataCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 17. Interactions inside the Logic Component for the <code>encrypt</code> Admin Command</div>
</div>
<div class="paragraph">
<p>When an <code>encrypt</code> executes successfully, two events will be raised and handled with reference to <em><a href="#fig-EncryptCommandHighLevelSequenceDiagram">Figure 18</a></em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>PartTimeManagerChangedEvent</code> saves encrypted or decrypted information of employees and shifts to local storage file "data/parttimemanager.xml".</p>
</li>
<li>
<p><code>OutletDataChangedEvent</code> saves encrypted or decrypted outlet information to local storage file "data/outletinformation.xml".</p>
</li>
</ol>
</div>
<div id="fig-EncryptCommandHighLevelSequenceDiagram" class="imageblock">
<div class="content">
<img src="../images/EncryptCommandHighLevelSequenceDiagrams.png" alt="EncryptCommandHighLevelSequenceDiagrams" width="800">
</div>
<div class="title">Figure 18. High Level Sequence Diagram for the <code>encrypt</code> Command</div>
</div>
<div class="paragraph">
<p>Currently, the local data is encrypted in the Advanced Encryption Standard (AES) in XML files.
If data is encrypted, data read from XML files must be decrypted before passing to the constructor of any object.
The function below demonstrates how outlet data is encrypted using the encrypt(String text) function when converting to a XML file:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> XmlAdaptedOutletInformation(<span class="predefined-type">String</span> outletName, ...) {
    ...
    this.outletName = encrypt(outletName);
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, decrypt(String encryptedText) can be called to decrypt data read from XML files.<br></p>
</div>
<div class="paragraph">
<p>The current implementation successfully prevents any user of the computer directly interpreting the stored information.
However, the limitation is that the XML file structure is still maintained and the title of each element is not encrypted as shown in <em><a href="#fig-OutletEncrypt">Figure 19</a></em>.
It is possible that any user with advanced knowledge of data encryption is able to decrypt the data with the found patterns.</p>
</div>
<div id="fig-OutletEncrypt" class="imageblock">
<div class="content">
<img src="../images/OutletInformationEncryptedXMLFile.jpg" alt="OutletInformationEncryptedXMLFile" width="800">
</div>
<div class="title">Figure 19. Example of an Encrypted XML File of Outlet Information</div>
</div>
<div class="paragraph">
<p>The limitation of the current implementation leads to an alternative implementation that encrypts the entire XML file.
The XMLCipher package from apache.org can be used to encrypt the XML file stored locally, as illustrated below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Document</span> encryptedDoc = XMLUtil.encryptDocument(document, secretKey, XMLCipher.AES_128);
XMLUtil.saveDocumentTo(encryptedDoc, encryptedFile);
<span class="predefined-type">Document</span> decryptedDoc = XMLUtil.decryptDocument(encryptedDoc, secretKey, XMLCipher.AES_128);
XMLUtil.saveDocumentTo(decryptedDoc, decryptedFile);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can implement <code>encryptDocument</code> using the code below. Take note that <code>decryptDocument</code> is simply the reverse process of <code>encryptDocument</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">Document</span> encryptDocument(<span class="predefined-type">Document</span> document, <span class="predefined-type">SecretKey</span> secretKey, <span class="predefined-type">String</span> algorithm) <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="predefined-type">Element</span> rootElement = document.getDocumentElement();
    XMLCipher xmlCipher = XMLCipher.getInstance(algorithm);
    xmlCipher.init(XMLCipher.ENCRYPT_MODE, secretKey);
    xmlCipher.doFinal(document, rootElement, <span class="predefined-constant">true</span>);
    <span class="keyword">return</span> document;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-13 10:55:44 UTC
</div>
</div>
</body>
</html>